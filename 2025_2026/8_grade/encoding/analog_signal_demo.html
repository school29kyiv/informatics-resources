<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–ü–µ—Ä–µ–¥–∞–π –∞–Ω–∞–ª–æ–≥–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª</title>
<style>
  :root{
    --bg:#f8fafc;--text:#0f172a;--muted:#64748b;--card:#ffffff;
    --bar:#cbd5e1;--fill:#6366f1;--win:#10b981;--zone:#d1fae5;--danger:#ef4444;--ok:#16a34a;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;background:var(--bg);color:var(--text)}
  .wrap{max-width:900px;margin:0 auto;padding:24px}
  .card{background:var(--card);border-radius:16px;box-shadow:0 2px 6px rgba(0,0,0,.08);padding:16px;margin: 16px 0;}
  h1{margin:0 0 6px;font-size:28px}
  p.lead{margin:0;color:var(--muted)}
  .bar{height:22px;background:var(--bar);border-radius:12px;position:relative;overflow:hidden}
  .fill{position:absolute;left:0;top:0;bottom:0;width:0;background:var(--fill);transition:width .1s linear}
  .zone{position:absolute;left:0;right:0;background:var(--zone);opacity:.6;pointer-events:none}
  .row{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .stat{font-size:14px;color:var(--muted)}
  button{border:0;border-radius:14px;padding:12px 16px;font-weight:700;cursor:pointer}
  .btn-hold{background:#4f46e5;color:#fff}
  .btn-hold:disabled{background:#a5b4fc;cursor:not-allowed}
  .btn-reset{background:#e2e8f0}
  .status{font-weight:800}
  .win{color:var(--ok)} .lose{color:var(--danger)}
  .hint{font-size:14px;color:var(--muted)}
  /* –ú–æ–±—ñ–ª—å–Ω–∞ –¥—Ä—É–∂–Ω—ñ—Å—Ç—å: –∫–Ω–æ–ø–∫–∏ —Ç—è–≥–Ω—É—Ç—å—Å—è –Ω–∞ —à–∏—Ä–∏–Ω—É –π –∫—Ä–∞—Å–∏–≤–æ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—å—Å—è */
  .controls button{flex:1 1 240px}
  /* –ù–µ–≤–µ–ª–∏–∫—ñ –±–µ–π–¥–∂—ñ –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ */
  .badge{display:inline-block;padding:4px 10px;border-radius:999px;font-size:13px;font-weight:700}
  .b-all{background:#e2e8f0;color:#0f172a}
  .b-win{background:#dcfce7;color:#065f46}
  .b-lose{background:#fee2e2;color:#991b1b}
  .b-rate{background:#fef9c3;color:#92400e}
</style>
</head>
<body>
  <div class="wrap">
    <h1>üéØ –í–ø—Ä–∞–≤–∞: ¬´–ü–µ—Ä–µ–¥–∞–π –∞–Ω–∞–ª–æ–≥–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª —Ç–æ—á–Ω–æ¬ª</h1>
    <p class="lead">–£—Ç—Ä–∏–º—É–π –∫–Ω–æ–ø–∫—É –π —Å–ø—Ä–æ–±—É–π –≤—ñ–¥–ø—É—Å—Ç–∏—Ç–∏ —Ä—ñ–≤–Ω–æ –≤ —Ü—ñ–ª—å. –õ–∏—à–µ <b>–æ–¥–Ω–∞ —Å–ø—Ä–æ–±–∞</b> –∑–∞ —Ä–∞—É–Ω–¥.</p>

    <div class="card">
      <div class="row">
        <div class="stat">–¶—ñ–ª—å–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å: <b id="targetNum">‚Äî</b> (–≤—ñ–∫–Ω–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ ¬±<span id="tolNum">‚Äî</span>)</div>
        <div class="stat">–ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: <b id="levelNum">0.0</b></div>
        <div class="stat">–°—Ç–∞–Ω: <span id="state" class="status" aria-live="polite">–ì–æ—Ç–æ–≤–æ</span></div>
      </div>

      <!-- –†—è–¥–æ–∫ –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ -->
      <div class="row" style="margin-top:8px">
        <div class="stat">
          <span class="badge b-all">–°–ø—Ä–æ–±: <b id="tries">0</b></span>
          <span class="badge b-win">–í–¥–∞–ª—ñ: <b id="wins">0</b></span>
          <span class="badge b-lose">–ù–µ–≤–¥–∞–ª—ñ: <b id="fails">0</b></span>
          <span class="badge b-rate">–£—Å–ø—ñ—Ö: <b id="winsPercentage">0</b></span>
        </div>
      </div>

      <div class="bar" style="margin:10px 0 8px">
        <div id="zone" class="zone"></div>
        <div id="fill" class="fill"></div>
      </div>

      <div class="row controls" style="gap:8px;margin-top:8px">
        <button id="holdBtn" class="btn-hold">‚èØÔ∏è –£—Ç—Ä–∏–º—É–π, —â–æ–± –ø—ñ–¥–≤–∏—â—É–≤–∞—Ç–∏ —Ä—ñ–≤–µ–Ω—å</button>
        <button id="resetBtn" class="btn-reset">üîÅ –ù–æ–≤–∏–π —Ä–∞—É–Ω–¥</button>
      </div>
      <div class="hint" style="margin-top:6px">
        ‚ûú –ü–µ—Ä–µ–º–æ–≥–∞: –≤—ñ–¥–ø—É—Å—Ç–∏ –≤ –º–µ–∂–∞—Ö —Ü—ñ–ª—ñ. –ü—Ä–æ–≥—Ä–∞—à: –≤—ñ–¥–ø—É—Å—Ç–∏–≤ —Ä–∞–Ω—ñ—à–µ/–ø—ñ–∑–Ω—ñ—à–µ –∞–±–æ –¥—ñ–π—à–æ–≤ –¥–æ –∫—ñ–Ω—Ü—è —à–∫–∞–ª–∏.
      </div>
    </div>
  </div>

<script>
(function(){
  // –§—ñ–∫—Å–æ–≤–∞–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è)
  const TOLERANCE = 0.2;   // –≤—ñ–∫–Ω–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ (¬± —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö —à–∫–∞–ª–∏)
  const TICK_MS   = 90;    // –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è –ø—ñ–¥ —á–∞—Å —É—Ç—Ä–∏–º–∞–Ω–Ω—è
  const BASE_SPD  = 0.9;   // –±–∞–∑–æ–≤–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ—Å—Ç—É –∑–∞ —Ç–∏–∫
  const NOISE_AMP = 0.8;   // —à—É–º (—ñ–º—ñ—Ç–∞—Ü—ñ—è "–∞–Ω–∞–ª–æ–≥–æ–≤–æ—Å—Ç—ñ")
  const MIN_TGT   = 18;    // –º–µ–∂—ñ –≤–∏–ø–∞–¥–∫–æ–≤–æ—ó —Ü—ñ–ª—ñ
  const MAX_TGT   = 92;


  // –ï–ª–µ–º–µ–Ω—Ç–∏
  const targetNum = document.getElementById('targetNum');
  const tolNum    = document.getElementById('tolNum');
  const levelNum  = document.getElementById('levelNum');
  const stateEl   = document.getElementById('state');
  const fillEl    = document.getElementById('fill');
  const zoneEl    = document.getElementById('zone');
  const holdBtn   = document.getElementById('holdBtn');
  const resetBtn  = document.getElementById('resetBtn');

  const triesEl = document.getElementById('tries');
  const winsEl  = document.getElementById('wins');
  const failsEl = document.getElementById('fails');
  const winsPercentageEl = document.getElementById('winsPercentage');

  // –°—Ç–∞–Ω —Ä–∞—É–Ω–¥—É
  let level = 0;
  let target = 0;
  let roundOver = false;
  let holdTimer = null;

  // –õ—ñ—á–∏–ª—å–Ω–∏–∫–∏
  let tries = 0;
  let wins  = 0;
  let fails = 0;
  let winsPercentage = 0;

  function rndTarget(){
    target = Math.floor(Math.random()*(MAX_TGT - MIN_TGT + 1)) + MIN_TGT;
  }

  function layoutZone(){
    const bar = zoneEl.parentElement.getBoundingClientRect();
    const totalW = bar.width;
    const center = target/100 * totalW;
    const zoneW = (2*TOLERANCE)/100 * totalW;
    zoneEl.style.top = '0px';
    zoneEl.style.height = '100%';
    zoneEl.style.width = Math.max(6, zoneW) + 'px';
    zoneEl.style.left = Math.max(0, Math.min(totalW - zoneW, center - zoneW/2)) + 'px';
  }

  function updateView(){
    fillEl.style.width = level + '%';
    const inWin = Math.abs(level - target) <= TOLERANCE;
    fillEl.style.background = inWin ? 'var(--win)' : 'var(--fill)';
    levelNum.textContent = level.toFixed(1);
  }

  function setState(txt, cls){
    stateEl.textContent = txt;
    stateEl.className = 'status ' + (cls || '');
  }

  function updateCounters(){
    triesEl.textContent = tries;
    winsEl.textContent  = wins;
    failsEl.textContent = fails;
    winsPercentageEl.textContent = `${winsPercentage.toFixed(0)}%`;
  }

  function startRound(){
    roundOver = false;
    level = 0;
    rndTarget();
    targetNum.textContent = target;
    tolNum.textContent = TOLERANCE;
    setState('–ì–æ—Ç–æ–≤–æ');
    holdBtn.disabled = false;
    updateView();
    layoutZone();
  }

  function endRound(win){
    if (roundOver) return; // –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—è–∂—É
    roundOver = true;
    holdBtn.disabled = true;
    // –û–ù–û–í–õ–Æ–Ñ–ú–û –õ–Ü–ß–ò–õ–¨–ù–ò–ö–ò
    tries++;
    if (win) wins++; else fails++;
    winsPercentage = wins / tries * 100;
    updateCounters();

    setState(win ? '–ü–µ—Ä–µ–º–æ–≥–∞ üéâ' : '–ü—Ä–æ–≥—Ä–∞—à üòµ', win ? 'win' : 'lose');
    if (holdTimer){ clearInterval(holdTimer); holdTimer = null; }
  }

  function tick(){
    const jitter = (Math.random()*2 - 1) * NOISE_AMP;
    level = Math.max(0, Math.min(100, level + BASE_SPD + jitter));
    updateView();
    if (level >= 100){
      endRound(false); // –ø–µ—Ä–µ—Ç—Ä–∏–º–∞–≤ ‚Äî –ø—Ä–æ–≥—Ä–∞—à
    }
  }

  // –ü–æ–¥—ñ—ó —É—Ç—Ä–∏–º–∞–Ω–Ω—è (–º–∏—à–∞ + —Ç–∞—á)
  function holdDown(){
    if (roundOver || holdTimer) return;
    setState('–¢—Ä–∏–º–∞—î‚Ä¶');
    holdTimer = setInterval(tick, TICK_MS);
  }
  function holdUp(){
    if (roundOver) return;
    if (holdTimer){ clearInterval(holdTimer); holdTimer = null; }
    const win = Math.abs(level - target) <= TOLERANCE && level < 100;
    endRound(win);
  }
  function holdCancel(){ // –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –¥–æ—Ç–∏–∫—É
    if (holdTimer){ clearInterval(holdTimer); holdTimer = null; }
    if (!roundOver){
      endRound(false); // —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∂–µ—Å—Ç—É —Ä–∞—Ö—É—î–º–æ —è–∫ –Ω–µ–≤–¥–∞–ª—É —Å–ø—Ä–æ–±—É
    }
  }

  // –ö–Ω–æ–ø–∫–∞ —É—Ç—Ä–∏–º–∞–Ω–Ω—è: –º–∏—à–∞
  holdBtn.addEventListener('mousedown', holdDown);
  document.addEventListener('mouseup', holdUp);
  // –ö–Ω–æ–ø–∫–∞ —É—Ç—Ä–∏–º–∞–Ω–Ω—è: —Ç–∞—á
  holdBtn.addEventListener('touchstart', function(e){ e.preventDefault(); holdDown(); }, {passive:false});
  holdBtn.addEventListener('touchend', function(e){ e.preventDefault(); holdUp(); }, {passive:false});
  holdBtn.addEventListener('touchcancel', function(e){ e.preventDefault(); holdCancel(); }, {passive:false});

  // –ù–æ–≤–∏–π —Ä–∞—É–Ω–¥ (—Ü—ñ–ª—å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
  resetBtn.addEventListener('click', startRound);
  resetBtn.addEventListener('touchend', function(e){ e.preventDefault(); startRound(); }, {passive:false});
  window.addEventListener('resize', layoutZone);


  // –°—Ç–∞—Ä—Ç
  updateCounters();
  startRound();
})();
</script>
</body>
</html>
