<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–≤—ñ–π–∫–æ–≤–∏—Ö —á–∏—Å–µ–ª (–¥–µ—Å—è—Ç–∫–æ–≤–∞ ‚Üí –¥–≤—ñ–π–∫–æ–≤–∞)</title>
<style>
  :root{
    --bg:#ffffff; --text:#0b1220; --muted:#475569; --border:#e2e8f0; --card:#f8fafc;
    --ok:#10b981; --bad:#ef4444; --accent:#7c3aed; --tile:#ffffff; --tileOn:#eef2ff; --tileOnBorder:#c7d2fe;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; color:var(--text); background:var(--bg)}
  .wrap{max-width:980px; margin:0 auto; padding:20px}
  h1{font-size:28px; margin:8px 0 4px}
  p.lead{margin:0 0 16px; color:var(--muted)}
  .panel{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; margin:12px 0}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .space-between{justify-content:space-between}
  .btn{border:0; padding:12px 16px; border-radius:12px; background:var(--accent); color:#fff; font-weight:800; cursor:pointer}
  .btn.secondary{background:#0ea5e9}
  .btn:disabled{opacity:.6; cursor:not-allowed}
  .badge{padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#fff; font-weight:700}
  .badge.ok{background:#ecfdf5; color:var(--ok); border-color:#a7f3d0}
  .status{font-weight:800}
  .status.ok{color:var(--ok)} .status.bad{color:var(--bad)}
  .pill{padding:6px 10px; border-radius:999px; background:#eef2ff; color:#3730a3; font-weight:700}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:10px}
  .tile{
    background:var(--tile); border:2px solid var(--border); border-radius:12px; padding:10px; cursor:pointer;
    display:flex; flex-direction:column; gap:4px; transition:.15s;
  }
  .tile:hover{transform:translateY(-1px)}
  .tile.on{background:var(--tileOn); border-color:var(--tileOnBorder); box-shadow:0 0 0 3px rgba(199,210,254,.5) inset}
  .tile .top{display:flex; justify-content:space-between; align-items:center}
  .tile b{font-size:18px}
  .tile small{color:var(--muted)}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
</style>
</head>
<body>
<div class="wrap">
  <h1>üß© –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: —Å–∫–ª–∞–¥–∏ —á–∏—Å–ª–æ –∑ 2‚Åø</h1>
  <p class="lead">–ü–µ—Ä–µ—Ç–≤–æ—Ä–∏ –¥–µ—Å—è—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ (0‚Äì256) —É –¥–≤—ñ–π–∫–æ–≤–∏–π –∑–∞–ø–∏—Å, –æ–±–∏—Ä–∞—é—á–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ <b>—Å—Ç–µ–ø–µ–Ω—ñ –¥–≤—ñ–π–∫–∏</b>. –ö–ª—ñ–∫ –ø–æ –ø–ª–∏—Ç—Ü—ñ 2‚Åø –≤–º–∏–∫–∞—î/–≤–∏–º–∏–∫–∞—î —ó—ó (–±—ñ—Ç 1/0).</p>

  <!-- –õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ + –∫–µ—Ä—É–≤–∞–Ω–Ω—è -->
  <div class="panel">
    <div class="row space-between">
      <div class="row">
        <span id="attempts" class="badge">–°–ø—Ä–æ–±: 0 (0%)</span>
        <span id="successes" class="badge ok">–£—Å–ø—ñ—Ö—ñ–≤: 0</span>
      </div>
      <div class="row">
        <button id="newBtn" class="btn secondary">üé≤ –ù–æ–≤–∞ –∑–∞–¥–∞—á–∞</button>
      </div>
    </div>
  </div>

  <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
  <div class="panel">
    <div class="row">
      <div class="pill">–ó–∞–≤–¥–∞–Ω–Ω—è</div>
    </div>
    <div class="row" style="margin-top:10px">
      <div style="font-size:22px">–î–µ—Å—è—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ:</div>
      <div id="targetDec" style="font-size:28px; font-weight:900">‚Äî</div>
    </div>

    <div style="margin-top:10px" class="mono">
      –û–±—Ä–∞–Ω—ñ –±—ñ—Ç–∏ (–≤—ñ–¥ 2‚Å∏ –¥–æ 2‚Å∞): <span id="bits">‚Äî</span>
    </div>
    <div style="margin-top:6px" class="mono">
      –ü–æ—Ç–æ—á–Ω–∞ —Å—É–º–∞: <span id="currentSum">0</span>
    </div>

    <div class="row" style="margin-top:14px">
      <button id="checkBtn" class="btn">‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
      <div id="status" class="status"></div>
    </div>
    <div id="explain" class="mono" style="color:#475569; margin-top:6px"></div>
  </div>

  <!-- –ü–ª–∏—Ç–∫–∏ 2^n -->
  <div class="panel">
    <div class="row"><div class="pill">–û–±–µ—Ä–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Å—Ç–µ–ø–µ–Ω—ñ –¥–≤—ñ–π–∫–∏</div></div>
    <p class="lead" style="margin-top:8px">–ü–æ—Ä–∞–¥–∞: –ø–æ—á–∏–Ω–∞–π –∑ –Ω–∞–π–±—ñ–ª—å—à–æ—ó 2‚Åø, —è–∫–∞ –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É—î —Ü—ñ–ª—å–æ–≤–µ —á–∏—Å–ª–æ.</p>
    <div id="tiles" class="grid" style="margin-top:10px"></div>
  </div>
</div>

<script>
(function(){
  // ---------- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ----------
  const MAX_POW = 8; // 2^8 = 256
  const MIN_POW = 0;
  const MAX_DEC = 256;

  // ---------- –°—Ç–∞–Ω ----------
  let target = 0;
  let bits = new Array(MAX_POW - MIN_POW + 1).fill(0); // –≤—ñ–¥ 2^8 –¥–æ 2^0
  let attempts = 0, successes = 0;
  let taskChecked = false; // –∑–∞–±–æ—Ä–æ–Ω—è—î –±–∞–≥–∞—Ç–æ—Ä–∞–∑–æ–≤—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É

  // ---------- DOM ----------
  const targetDecEl = document.getElementById('targetDec');
  const bitsEl = document.getElementById('bits');
  const sumEl = document.getElementById('currentSum');
  const tilesEl = document.getElementById('tiles');
  const statusEl = document.getElementById('status');
  const explainEl = document.getElementById('explain');
  const attemptsEl = document.getElementById('attempts');
  const successesEl = document.getElementById('successes');
  const newBtn = document.getElementById('newBtn');
  const checkBtn = document.getElementById('checkBtn');

  // ---------- –£—Ç–∏–ª—ñ—Ç–∏ ----------
  function randDec(){ return Math.floor(Math.random()*(MAX_DEC+1)); }
  function pow2(p){ return 1<<p; }
  function pctSuccess(){
    if (attempts === 0) return 0;
    return Math.round((successes / attempts) * 100);
  }
  function renderCounters(){
    attemptsEl.textContent = `–°–ø—Ä–æ–±: ${attempts} (${pctSuccess()}%)`;
    successesEl.textContent = `–£—Å–ø—ñ—Ö—ñ–≤: ${successes}`;
  }
  function sumFromBits(){
    let s = 0;
    for(let i=0;i<bits.length;i++){
      const p = MAX_POW - i;
      if(bits[i]===1) s += pow2(p);
    }
    return s;
  }
  function bitsToString(){
    const s = bits.join('');
    return (/^0+$/.test(s)) ? '0' : s.replace(/^0+/, '');
  }
  function explainFromBits(){
    const terms = [];
    for(let i=0;i<bits.length;i++){
      const p = MAX_POW - i;
      if(bits[i]===1) terms.push(`2^${p}`);
    }
    return terms.length ? terms.join(' + ') : '0';
  }
  function decToBin(n){
    if(n===0) return '0';
    let s=''; let x=n;
    while(x>0){ s=(x%2)+s; x=Math.floor(x/2); }
    return s;
  }
  function greedyDecompose(n){
    if(n===0) return [];
    const res=[]; let x=n;
    for(let p=MAX_POW; p>=MIN_POW; p--){
      const val = pow2(p);
      if(val<=x){ res.push(p); x-=val; }
    }
    return res;
  }

  // ---------- –ü–æ–±—É–¥–æ–≤–∞ –ø–ª–∏—Ç–æ–∫ ----------
  function buildTiles(){
    tilesEl.innerHTML = '';
    for(let p=MAX_POW; p>=MIN_POW; p--){
      const idx = MAX_POW - p;
      const val = pow2(p);

      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.dataset.idx = idx;

      const top = document.createElement('div');
      top.className = 'top';
      const powEl = document.createElement('b'); powEl.textContent = `2^${p}`;
      const bitEl = document.createElement('span'); bitEl.textContent = '–±—ñ—Ç: 0'; bitEl.style.fontWeight='800';
      top.appendChild(powEl); top.appendChild(bitEl);

      const small = document.createElement('small'); small.textContent = `= ${val}`;
      tile.appendChild(top);
      tile.appendChild(small);

      tile.addEventListener('click', ()=>{
        if(taskChecked) return; // –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–ª–∏—Ç–∫–∏ –±–ª–æ–∫—É—é—Ç—å—Å—è
        bits[idx] = bits[idx] ? 0 : 1;
        renderState();
      });

      tilesEl.appendChild(tile);
    }
    renderState();
  }

  // ---------- –í—ñ–¥–º–∞–ª—å–æ–≤—É–≤–∞–Ω–Ω—è ----------
  function renderState(){
    [...tilesEl.children].forEach((tile)=>{
      const idx = Number(tile.dataset.idx);
      const bit = bits[idx];
      const span = tile.querySelector('.top span');
      span.textContent = '–±—ñ—Ç: ' + bit;
      tile.classList.toggle('on', bit===1);
    });
    bitsEl.textContent = bits.join(' ') + '  ‚Üí  –¥–≤—ñ–π–∫–æ–≤–µ: ' + bitsToString();
    sumEl.textContent = String(sumFromBits());
    statusEl.textContent = '';
    statusEl.className = 'status';
    explainEl.textContent = '';
  }

  // ---------- –õ–æ–≥—ñ–∫–∞ –∑–∞–¥–∞—á—ñ ----------
  function newTask(){
    target = randDec();
    targetDecEl.textContent = target;
    bits = bits.map(()=>0);
    taskChecked = false;           // –¥–æ–∑–≤–æ–ª—è—î–º–æ –æ–¥–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –¥–ª—è –Ω–æ–≤–æ—ó –∑–∞–¥–∞—á—ñ
    checkBtn.disabled = false;     // —Ä–æ–∑–±–ª–æ–∫—É—î–º–æ –∫–Ω–æ–ø–∫—É
    renderState();
  }

  function check(){
    if(taskChecked) return;        // –¥–≤—ñ—á—ñ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ
    taskChecked = true;
    checkBtn.disabled = true;      // –±–ª–æ–∫—É—î–º–æ –∫–Ω–æ–ø–∫—É –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

    attempts += 1; renderCounters();

    const s = sumFromBits();
    const bin = bitsToString();
    const exp = explainFromBits();

    if(s === target){
      successes += 1; renderCounters();
      statusEl.textContent = '‚úÖ –í—ñ—Ä–Ω–æ!';
      statusEl.className = 'status ok';
      explainEl.innerHTML = `–ü–æ—è—Å–Ω–µ–Ω–Ω—è: ${bin} = ${exp} = <b>${s}</b>`;
    }else{
      statusEl.textContent = '‚ùå –ù–µ–≤—ñ—Ä–Ω–æ.';
      statusEl.className = 'status bad';
      const greedy = greedyDecompose(target);
      const greedyStr = greedy.length ? greedy.map(p=>`2^${p}`).join(' + ') : '0';
      const correctBin = decToBin(target);
      explainEl.innerHTML = `–¢–≤–æ—î: ${bin} = ${exp} = <b>${s}</b><br>–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${correctBin}</b> = ${greedyStr} = <b>${target}</b>`;
    }
  }

  // ---------- –ü–æ–¥—ñ—ó ----------
  newBtn.addEventListener('click', newTask);
  checkBtn.addEventListener('click', check);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Enter') check(); });

  // ---------- –°—Ç–∞—Ä—Ç ----------
  renderCounters();
  buildTiles();
  newTask();
})();
</script>
</body>
</html>
